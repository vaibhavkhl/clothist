"use strict";angular.module("clientApp",["ngMessages","ui.router","ng-token-auth","formly","formlyBootstrap"]).config(["$stateProvider","$urlRouterProvider","$authProvider",function(a,b,c){a.state("login",{url:"/login",templateUrl:"views/login.html",controller:"LoginCtrl"}).state("landing",{url:"/landing",templateUrl:"views/landing.html",controller:"LandingCtrl"}).state("signup",{url:"/signup",templateUrl:"views/signup.html",controller:"SignupCtrl","abstract":!0}).state("signup.work",{url:"/work",templateUrl:"views/work_preference.html",controller:"WorkPreferenceCtrl"}).state("signup.leisure",{url:"/leisure",templateUrl:"views/leisure_preference.html",controller:"LeisurePreferenceCtrl"}).state("signup.dislike",{url:"/dislike",templateUrl:"views/dislike_preference.html",controller:"DislikePreferenceCtrl"}).state("signup.patterns",{url:"/patterns",templateUrl:"views/patterns_dislike_preference.html",controller:"PatternsDislikePreferenceCtrl"}).state("signup.cost",{url:"/cost",templateUrl:"views/cost_preference.html",controller:"CostPreferenceCtrl"}).state("signup.registration",{url:"/registration",templateUrl:"views/registration.html",controller:"RegistrationCtrl"}).state("home",{url:"/home",templateUrl:"views/home.html",controller:"HomeCtrl",resolve:{auth:["$auth",function(a){return a.validateUser()}]}}).state("home.sizeprofile",{url:"/sizeprofile",templateUrl:"views/size_profile.html",controller:"SizeProfileCtrl"}).state("home.schedulebox",{url:"/box",templateUrl:"views/schedule_box.html",controller:"ScheduleBoxCtrl"}),b.otherwise("/landing"),c.configure({apiUrl:"/api"})}]).run(["$rootScope","$state",function(a,b){a.$on("auth:login-success",function(a){b.go("home")}),a.$on("auth:logout-success",function(a){console.log("goodbye")}),a.$on("auth:validation-success",function(){console.log("validated, user is allowed"),b.go("home")}),a.$on("auth:invalid",function(){console.log("unauthorized"),b.go("login")})}]),angular.module("clientApp").controller("SignupCtrl",["$scope","$auth","$state","$rootScope",function(a,b,c,d){a.user={},a.workpreference={},a.leisurepreference={},a.dislikepreference={},a.patternsdislikepreference={},a.costpreference={},a.submit=function(){var f=e();b.submitRegistration(f).then(function(a){d.current_user=a.data.data,c.go("home")})["catch"](function(b){a.errors=b.data.errors.full_messages[0]})};var e=function(){a.user.workpreference_attributes=f(a.workpreference),a.user.leisurepreference_attributes=f(a.leisurepreference),a.user.dislikepreference_attributes=f(a.dislikepreference),a.user.patternsdislikepreference_attributes=f(a.patternsdislikepreference),a.user.costpreference_attributes=f(a.costpreference);var b={user:a.user};return console.log(b),b},f=function(a){var b=[];return _.each(a,function(a,c){a&&b.push({image_name:c})}),b}}]),angular.module("clientApp").controller("LoginCtrl",["$scope","$auth","$rootScope",function(a,b,c){a.user={},a.submit=function(){b.submitLogin(a.user).then(function(a){c.current_user=a})["catch"](function(b){a.errors=b.errors[0]})},a.userFields=[{key:"email",type:"input",templateOptions:{type:"email",label:"Email address",placeholder:"Enter email"}},{key:"password",type:"input",templateOptions:{type:"password",label:"Password",placeholder:"Password"}}]}]),angular.module("clientApp").controller("HomeCtrl",["$scope","$auth","$state","$rootScope","user",function(a,b,c,d,e){a.signOut=function(){b.signOut().then(function(){c.go("login")})},e.getCurrentUser().then(function(a){a.data.user.size_profile?c.go("home.schedulebox"):c.go("home.sizeprofile")})}]),angular.module("clientApp").controller("WorkPreferenceCtrl",["$scope","$state",function(a,b){a.workpreference.no_dress_code_image=!1,a.workpreference.smart_casual_image=!1,a.workpreference.formals_image=!1,a.workpreference.suit_image=!1}]),angular.module("clientApp").controller("LeisurePreferenceCtrl",["$scope",function(a){a.leisurepreference.casual_image=!1,a.leisurepreference.formal_image=!1,a.leisurepreference.relaxed_image=!1,a.leisurepreference.smart_image=!1}]),angular.module("clientApp").controller("DislikePreferenceCtrl",["$scope",function(a){a.dislikepreference.coloured_chino_image=!1,a.dislikepreference.distressed_denim_image=!1,a.dislikepreference.half_sleeved_shirt_image=!1,a.dislikepreference.vneck_image=!1}]),angular.module("clientApp").controller("PatternsDislikePreferenceCtrl",["$scope",function(a){a.patternsdislikepreference.boldchecks_image=!1,a.patternsdislikepreference.boldpatterns_image=!1,a.patternsdislikepreference.largelogo_image=!1,a.patternsdislikepreference.printedshirt_image=!1}]),angular.module("clientApp").controller("CostPreferenceCtrl",function(){}),angular.module("clientApp").controller("RegistrationCtrl",["$scope",function(a){a.userFields=[{key:"first_name",type:"input",templateOptions:{label:"First Name",placeholder:"First Name"}},{key:"last_name",type:"input",templateOptions:{label:"Last Name",placeholder:"Last Name"}},{key:"phn_no",type:"input",templateOptions:{label:"Mobile Number",placeholder:"Mobile Number"}},{key:"email",type:"input",templateOptions:{type:"email",label:"Email address",placeholder:"Enter email"}},{key:"password",type:"input",templateOptions:{type:"password",label:"Password",placeholder:"Password"}},{key:"password_confirmation",type:"input",templateOptions:{type:"password",label:"Confirm Password",placeholder:"Password"}}]}]),angular.module("clientApp").controller("LandingCtrl",function(){}),angular.module("clientApp").controller("IndexCtrl",["$scope","$auth","$state",function(a,b,c){a.signOut=function(){b.signOut().then(function(){c.go("login")})}}]),angular.module("clientApp").service("box",["$http","$auth",function(a,b){this.create=function(c){return a.post(b.apiUrl()+"/box",{box:c})}}]),angular.module("clientApp").service("user",["$http","$auth","$rootScope",function(a,b,c){this.getCurrentUser=function(){return a.get(b.apiUrl()+"/user/"+c.user.id)}}]),angular.module("clientApp").controller("SizeProfileCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("clientApp").controller("ScheduleBoxCtrl",["$scope","box","$rootScope",function(a,b,c){a.scheduleBox=function(){a.box.user_id=c.user.id,b.create(a.box)}}]);