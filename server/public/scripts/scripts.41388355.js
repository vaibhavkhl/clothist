"use strict";angular.module("clientApp",["ngMessages","ui.router","ng-token-auth","formly","formlyBootstrap"]).config(["$stateProvider","$urlRouterProvider","$authProvider",function(a,b,c){a.state("login",{url:"/login",templateUrl:"views/login.html",controller:"LoginCtrl"}).state("landing",{url:"/landing",templateUrl:"views/landing.html",controller:"LandingCtrl"}).state("signup",{url:"/signup",templateUrl:"views/signup.html",controller:"SignupCtrl","abstract":!0}).state("signup.work",{url:"/work",templateUrl:"views/work.html",controller:"WorkCtrl"}).state("signup.leisure",{url:"/leisure",templateUrl:"views/leisure.html",controller:"LeisureCtrl"}).state("signup.not_wear",{url:"/not_wear",templateUrl:"views/not_wear.html",controller:"NotWearCtrl"}).state("signup.patterns",{url:"/patterns",templateUrl:"views/patterns_unlike.html",controller:"PatternsUnlikeCtrl"}).state("signup.spend",{url:"/spend",templateUrl:"views/spend.html",controller:"SpendCtrl"}).state("signup.registration",{url:"/registration",templateUrl:"views/registration.html",controller:"RegistrationCtrl"}).state("home",{url:"/home",templateUrl:"views/home.html",controller:"HomeCtrl",resolve:{auth:["$auth",function(a){return a.validateUser()}]}}),b.otherwise("/landing"),c.configure({apiUrl:"/api"})}]).run(["$rootScope","$state",function(a,b){a.$on("auth:login-success",function(a){b.go("home")}),a.$on("auth:logout-success",function(a){console.log("goodbye")}),a.$on("auth:validation-success",function(){console.log("validated, user is allowed")}),a.$on("auth:invalid",function(){console.log("unauthorized"),b.go("login")})}]),angular.module("clientApp").controller("SignupCtrl",["$scope","$auth","$state","$rootScope",function(a,b,c,d){a.user={},a.work={},a.submit=function(){var f=e();b.submitRegistration(f).then(function(a){d.current_user=a.data.data,c.go("home")})["catch"](function(b){a.errors=b.data.errors.full_messages[0]})};var e=function(){var b=f();a.user.workpreference_attributes=b;var c={user:a.user};return c},f=function(){var b=[];return _.each(a.work,function(a,c){a&&b.push({image_name:c})}),b}}]),angular.module("clientApp").controller("LoginCtrl",["$scope","$auth","$rootScope",function(a,b,c){a.user={},a.submit=function(){b.submitLogin(a.user).then(function(a){c.current_user=a})["catch"](function(b){a.errors=b.errors[0]})},a.userFields=[{key:"email",type:"input",templateOptions:{type:"email",label:"Email address",placeholder:"Enter email"}},{key:"password",type:"input",templateOptions:{type:"password",label:"Password",placeholder:"Password"}}]}]),angular.module("clientApp").controller("HomeCtrl",["$scope","$auth","$state",function(a,b,c){a.signOut=function(){b.signOut().then(function(){c.go("login")})}}]),angular.module("clientApp").controller("WorkCtrl",["$scope","$state",function(a,b){a.work.formal_no_dress_code_image=!1,a.work.shirt_denim_image=!1,a.work.shirt_trouser_final_image=!1,a.work.suit_image=!1}]),angular.module("clientApp").controller("LeisureCtrl",function(){}),angular.module("clientApp").controller("NotWearCtrl",function(){}),angular.module("clientApp").controller("PatternsUnlikeCtrl",function(){}),angular.module("clientApp").controller("SpendCtrl",function(){}),angular.module("clientApp").controller("RegistrationCtrl",["$scope",function(a){a.userFields=[{key:"email",type:"input",templateOptions:{type:"email",label:"Email address",placeholder:"Enter email"}},{key:"password",type:"input",templateOptions:{type:"password",label:"Password",placeholder:"Password"}},{key:"password_confirmation",type:"input",templateOptions:{type:"password",label:"Confirm Password",placeholder:"Password"}}]}]),angular.module("clientApp").controller("LandingCtrl",function(){}),angular.module("clientApp").controller("IndexCtrl",["$scope","$auth","$state",function(a,b,c){a.signOut=function(){b.signOut().then(function(){c.go("login")})}}]);